<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="UserReviewMapper">

	<update id="saveUserReview" parameterType="UserReviewVO">
		UPDATE REVIEW SET
		R_POINT = #{r_point}, R_CONTENT= #{r_content}, R_REGDATE = now()
		WHERE
		R_ID = #{r_id}
	</update>

	<delete id="deleteUserReview" parameterType="UserReviewVO">
    DELETE 
    FROM REVIEW 
    WHERE R_ID =   #{r_id}
</delete>

	<select id="getUserReview" parameterType="UserReviewVO"
		resultType="UserReviewVO">
		SELECT REVIEW.*,GOODS.G_NAME,MAKER.M_NAME,BUY.P_NAME
		FROM
		REVIEW
		INNER JOIN GOODS
		ON REVIEW.G_ID = GOODS.G_ID
		INNER JOIN USER
		ON
		REVIEW.ID = USER.ID
		INNER JOIN MAKER
		ON GOODS.M_ID = MAKER.M_ID
		INNER
		JOIN BUY
		ON REVIEW.B_ID = BUY.B_ID
		WHERE REVIEW.R_ID = #{r_id}

	</select>

	<select id="getUserReviewList" parameterType="UserReviewVO"
		resultType="UserReviewVO">

		SELECT REVIEW.*,GOODS.G_NAME,MAKER.M_NAME,BUY.P_NAME
		FROM
		REVIEW
		INNER JOIN GOODS
		ON REVIEW.G_ID = GOODS.G_ID
		INNER JOIN USER
		ON
		REVIEW.ID = USER.ID
		INNER JOIN MAKER
		ON GOODS.M_ID = MAKER.M_ID
		INNER
		JOIN BUY
		ON REVIEW.B_ID = BUY.B_ID
		WHERE REVIEW.ID = #{id}
		ORDER BY R_ID
		DESC;

	</select>


</mapper>